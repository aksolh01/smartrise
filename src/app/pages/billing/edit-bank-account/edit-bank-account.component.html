<div class="page-header-container">
    <div class="page-header-title" *ngIf="bankAccount">
        <span (click)="onClose()" class="cursor">Bank Accounts</span> / {{bankAccount?.last4}}
    </div>
</div>

<nb-card size="xlarge" *ngIf="bankAccount">
    <nb-card-header class="default-card-header">
        <h2 class="card-title">Bank Account Details - {{ bankAccount?.customer.name | value }}</h2>
    </nb-card-header>
    <nb-card-body [nbSpinner]="isLoading" nbSpinnerStatus="primary" nbSpinnerSize="giant">
        <div *ngIf="bankAccount?.isDefault" class="badge badge-pill float-right font-weight-normal is-default mr-1">
            DEFAULT
        </div>
        <div *ngIf="bankAccount?.isDeleted"
            class="badge badge-pill badge-danger float-right font-weight-normal open-quote-deleted">
            DELETED
        </div>
        <div [class]="!bankAccount?.isDeleted && !bankAccount?.isDefault ? '' : ''">
            <form [formGroup]="bankAccountForm" (ngSubmit)="onSubmit()" class="form-container">
                <div class="row-container">
                    <div class="input-container">

                        <div *ngIf="displayAccountName" class="input-sub-container">
                            <label class="label-align">Account Name</label>
                            <div class="input-item">
                                <div class="input-item-label">{{ bankAccount?.customer.name | value }}</div>
                            </div>
                        </div>

                        <div class="input-sub-container">
                            <label class="label-align">Account Number (last 4 digits)</label>
                            <div class="input-item">
                                <div class="input-item-label">{{ bankAccount?.last4 | value }}</div>
                            </div>
                        </div>

                        <div class="input-sub-container">
                            <label class="label-align">Name on
                                Account</label>
                            <div class="input-item">
                                <input placeholder="Name on Account" type="text" formControlName="accountHolderName"
                                    id="accountHolderName">
                                <div *ngIf="formSubmitted">
                                    <div class="help-block error" *ngIf="
        bankAccountForm.get('accountHolderName').errors != null &&
        bankAccountForm.get('accountHolderName').errors[
          'requiredWithTrim'
        ] &&
        bankAccountForm.get('accountHolderName').touched
      ">
                                        Name on Account is required
                                    </div>
                                    <div class="help-block error" *ngIf="
        bankAccountForm.get('accountHolderName').errors != null &&
        bankAccountForm.get('accountHolderName').errors[
          'trimError'
        ] &&
        bankAccountForm.get('accountHolderName').touched
      ">
                                        This field can't start or end with a blank space
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="input-container">

                        <div class="input-sub-container">
                            <label class="label-align">Bank Name</label>
                            <div class="input-item">
                                <div class="input-item-label">{{ bankAccount?.bankName | value }}</div>
                            </div>
                        </div>

                        <div class="input-sub-container">
                            <label class="label-align">Account Type</label>
                            <div class="input-item">
                                <nb-select [attr.placeholder-selected]="bankAccountForm.value.accountType === ''"
                                    formControlName="accountType">
                                    <nb-option value="">Account Type</nb-option>
                                    <nb-option value="Individual">Individual</nb-option>
                                    <nb-option value="Company">Company</nb-option>
                                </nb-select>
                                <div *ngIf="formSubmitted">
                                    <div class="help-block error" *ngIf="
        bankAccountForm.get('accountType').errors != null &&
        bankAccountForm.get('accountType').errors[
          'requiredWithTrim'
        ] &&
        bankAccountForm.get('accountType').touched
      ">
                                        Account Type is required
                                    </div>
                                    <div class="help-block error" *ngIf="
        bankAccountForm.get('accountType').errors != null &&
        bankAccountForm.get('accountType').errors[
          'trimError'
        ] &&
        bankAccountForm.get('accountType').touched
      ">
                                        This field can't start or end with a blank space
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-buttons">
                    <button type="button" (click)="onClose()" class="secondary-button">
                        Cancel
                    </button>
                    <button [disabled]="isSaving" type="submit" class="main-button">
                        Update
                    </button>
                </div>
            </form>
        </div>
    </nb-card-body>
</nb-card>