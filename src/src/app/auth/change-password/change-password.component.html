<form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="form-container">

    <div *ngIf="errorMessage" class="alert alert-danger">
        {{ errorMessage }}
    </div>
    <ng-template [ngIf]="!succuessMessage">


        <div class="input-container">
            <div class="input-sub-container">
                <label for="currentPassword" class="pt-2 required label-align">Current Password</label>
                <div class="input-item">
                    <ngx-smr-password-input maxlength="255" id="currentPassword" formControlName="currentPassword"
                        placeholder="Current Password">
                    </ngx-smr-password-input>
                    <div class="help-block error" *ngIf="formSubmitted &&
            changePasswordForm.get('currentPassword').errors != null &&
            changePasswordForm.get('currentPassword').errors['required'] &&
            changePasswordForm.get('currentPassword').touched">
                        Current Password is required
                    </div>
                </div>

            </div>
            <div class="input-sub-container input-item">
                <label for="password" class="pt-2 required label-align">New Password</label>
                <div class="input-item">
                    <ngx-smr-password-input maxlength="255" id="password" formControlName="password"
                        placeholder="New Password" [showValidations]="formSubmitted">
                    </ngx-smr-password-input>
                    <div class="help-block error" *ngIf="formSubmitted &&
            changePasswordForm.get('password').errors != null &&
            changePasswordForm.get('password').errors['required'] &&
            changePasswordForm.get('password').touched">
                        <!-- New Password is required -->
                    </div>
                </div>
            </div>
            <div class="input-sub-container input-item">
                <label for="confirmPassword" class="pt-2 required label-align">Confirm Password</label>
                <div class="input-item">
                    <ngx-smr-password-input maxlength="255" id="confirmPassword" formControlName="confirmPassword"
                        placeholder="Confirm Password">
                    </ngx-smr-password-input>
                    <div class="help-block error" *ngIf="formSubmitted &&
            changePasswordForm.get('confirmPassword').errors != null &&
            changePasswordForm.get('confirmPassword').errors['required'] &&
            changePasswordForm.get('confirmPassword').touched">
                        Confirm Password is required
                    </div>
                    <div class="help-block error" *ngIf="formSubmitted &&
            changePasswordForm.get('confirmPassword').errors != null &&
            changePasswordForm.get('confirmPassword').errors['mismatchingPasswords'] && 
            changePasswordForm.get('confirmPassword').touched">
                        Passwords are mismatching
                    </div>
                </div>
            </div>
        </div>

        <div class="form-action">
            <ngx-button [isLoading]="isLoading" class="main-button" type="submit">
                Save
            </ngx-button>
        </div>

    </ng-template>
    <ng-template [ngIf]="succuessMessage">
        <div class="alert alert-success font-weight-bold">
            {{ succuessMessage }}
        </div>
        <div class="text-right">
            <button class="main-button" (click)="back()">
                <i class="fas fa-chevron-left"></i>
                Back to Dashboard
            </button>
        </div>
    </ng-template>
</form>