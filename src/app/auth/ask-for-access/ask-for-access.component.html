<form [formGroup]="form" *ngIf="form" (ngSubmit)="onSubmit()">
    <ng-template [ngIf]="!succuessMessage">
        <div>
            <div class="form-group">
                <input type="text" formControlName="firstName" placeholder="First Name" class="form-control"
                    maxlength="255" />
                <div *ngIf="formSubmitted && form.get('firstName').touched && form.get('firstName').errors && form.get('firstName').errors['requiredWithTrim']"
                    class="mt-1 help-block error">
                    First Name is required
                </div>

                <div *ngIf="formSubmitted && form.get('firstName').touched && form.get('firstName').errors && form.get('firstName').errors['trimError']"
                    class="mt-1 help-block error">
                    This field can't start or end with a blank space
                </div>
            </div>
            <div class="form-group">
                <input type="text" formControlName="lastName" placeholder="Last Name" class="form-control"
                    maxlength="255" />
                <div *ngIf="formSubmitted && form.get('lastName').touched && form.get('lastName').errors && form.get('lastName').errors['requiredWithTrim']"
                    class="mt-1 help-block error">
                    Last Name is required
                </div>
                <div *ngIf="formSubmitted && form.get('lastName').touched && form.get('lastName').errors && form.get('lastName').errors['trimError']"
                    class="mt-1 help-block error">
                    This field can't start or end with a blank space
                </div>
            </div>
            <div class="form-group">

                <input type="text" formControlName="companyName" placeholder="Company Name" class="form-control"
                    maxlength="255" />
                <div *ngIf="formSubmitted && form.get('companyName').touched && form.get('companyName').errors && form.get('companyName').errors['requiredWithTrim']"
                    class="mt-1 help-block error">
                    Company Name is required
                </div>
                <div *ngIf="formSubmitted && form.get('companyName').touched && form.get('companyName').errors && form.get('companyName').errors['trimError']"
                    class="mt-1 help-block error">
                    This field can't start or end with a blank space
                </div>
            </div>
            <div class="form-group phone-form-group">

                <input type="text" ng2TelInput (keypress)="keyPress($event)" (countryChange)="countryChange($event)"
                    formControlName="phoneNumber" placeholder="Phone Number" class="form-control" maxlength="30" />
                <div *ngIf="formSubmitted && form.get('phoneNumber').touched && form.get('phoneNumber').errors && form.get('phoneNumber').errors['required']"
                    class="mt-1 help-block error">
                    Phone Number is required
                </div>
                <div *ngIf="formSubmitted && form.get('phoneNumber').touched && form.get('phoneNumber').errors && form.get('phoneNumber').errors['trimError']"
                    class="mt-1 help-block error">
                    This field can't start or end with a blank space
                </div>
            </div>
            <div class="form-group phone-form-group">

                <input type="text" formControlName="country" placeholder="Country" class="form-control"
                    maxlength="255" />
                <div *ngIf="formSubmitted && form.get('country').touched && form.get('country').errors && form.get('country').errors['requiredWithTrim']"
                    class="mt-1 help-block error">
                    Country is required
                </div>
                <div *ngIf="formSubmitted && form.get('country').touched && form.get('country').errors && form.get('country').errors['trimError']"
                    class="mt-1 help-block error">
                    This field can't start or end with a blank space
                </div>
            </div>

            <div class="form-group phone-form-group">

                <input type="text" formControlName="state" placeholder="State/Province" class="form-control"
                    maxlength="255" />
                <div *ngIf="formSubmitted && form.get('state').touched && form.get('state').errors && form.get('state').errors['requiredWithTrim']"
                    class="mt-1 help-block error">
                    State/Province is required
                </div>
                <div *ngIf="formSubmitted && form.get('state').touched && form.get('state').errors && form.get('state').errors['trimError']"
                    class="mt-1 help-block error">
                    This field can't start or end with a blank space
                </div>
            </div>

            <div class="form-group phone-form-group">

                <input type="text" formControlName="city" placeholder="City" class="form-control" maxlength="255" />
                <div *ngIf="formSubmitted && form.get('city').touched && form.get('city').errors && form.get('city').errors['requiredWithTrim']"
                    class="mt-1 help-block error">
                    City is required
                </div>
                <div *ngIf="formSubmitted && form.get('city').touched && form.get('city').errors && form.get('city').errors['trimError']"
                    class="mt-1 help-block error">
                    This field can't start or end with a blank space
                </div>
            </div>

            <div class="form-group">

                <input type="text" formControlName="email" placeholder="Email Address" class="form-control"
                    (keydown.space)="$event.preventDefault()" />
                <div *ngIf="formSubmitted && form.get('email').touched && form.get('email').errors && form.get('email').errors['requiredWithTrim']"
                    class="mt-1 help-block error">
                    Email Address is required
                </div>
                <div *ngIf="formSubmitted && form.get('email').dirty && form.get('email').errors 
                && (form.get('email').errors['smartriseEmail'] && !form.get('email').errors['trimError'])"
                    class="mt-1 help-block error">
                    Please enter a valid email
                </div>
                <div *ngIf="formSubmitted && form.get('email').touched && form.get('email').errors && form.get('email').errors['trimError']"
                    class="mt-1 help-block error">
                    This field can't start or end with a blank space
                </div>
            </div>
        </div>

        <div class="actions text-right mt-3">
            <button class="btn btn-lg btn-primary px-3 mr-2" type="button" (click)="goToLogin()">
                <i class="fas fa-chevron-left"></i>
                Back To Login
            </button>

            <ngx-button [isLoading]="isLoading" 
                class="btn btn-lg btn-primary px-3 button-width" type="submit">
                <i class="fas fa-upload"></i> Submit
            </ngx-button>
        </div>

    </ng-template>

    <ng-template [ngIf]="succuessMessage">
        <div class="alert alert-success font-weight-bold">
            {{ succuessMessage }}
        </div>
        <div class="text-right">
            <button class="btn btn-primary" (click)="goToLogin()">
                <i class="fas fa-chevron-left"></i>
                Go to Login</button>
        </div>
    </ng-template>

</form>